<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
    <button id="buttons">
        <a href="javascript:;">source-over</a>
        <a href="javascript:;">source-atop</a>
        <a href="javascript:;">source-in</a>
        <a href="javascript:;">source-out</a>
        <a href="javascript:;">destination-over</a>
        <a href="javascript:;">destination-atop</a>
        <a href="javascript:;">destination-in</a>
        <a href="javascript:;">destination-out</a>
        <a href="javascript:;">lighter</a>
        <a href="javascript:;">copy</a>
        <a href="javascript:;">xor</a>
    </button>
    <canvas id="canvas">
        您的浏览器不支持canvas
    </canvas>
    <script>
        
        window.onload = function() {
            var canvas = document.getElementById('canvas');

            var buttons = document.getElementById('buttons').getElementsByTagName('a');
                for(var i = 0; i < buttons.length; i++){
                    buttons[i].onclick = function(){
                        draw(this.text);
                        return false;
                    }
                }
            }

            function draw(compositeStyle) {
                var canvas = document.getElementById('canvas');
                    canvas.width = 1200;
                    canvas.height = 800;

                    var context = canvas.getContext('2d');
                    context.clearRect(0,0,canvas.width, canvas.height);

                    //draw title
                    context.font = 'bold 40px Arial';
                    context.textAlign = 'center';
                    context.textBaseline = 'middle';
                    context.fillStyle = '#058';
                    context.fillText('globalCompositeOperation =' + compositeStyle, canvas.width / 2, 60);

                    //draw a rect
                    context.fillStyle = 'blue';
                    context.fillRect(300, 150, 500, 500);

                    //draw a triangle
                    context.globalCompositeOperation = compositeStyle;
                    context.fillStyle = 'red';
                    context.beginPath();
                    context.moveTo(700, 250);
                    context.lineTo(1000, 750);
                    context.lineTo(400, 750);
                    context.fill();
                    context.closePath();

            }
    
    </script>

</body>
</html>